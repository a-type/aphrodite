cli.ts from codegen should be move here!
and any dependence on codegen plugins.